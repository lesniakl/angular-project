import{a as m,b,d as v,e as y,f as w,g as T}from"./chunk-BAEMG5CN.js";import{a as f}from"./chunk-UNDOHNHE.js";import{a,b as g,c as E,h as L}from"./chunk-SDUPZHXZ.js";import{g as n}from"./chunk-2R6CW7ES.js";var p=class{constructor(){this.overlays=new Set}connected(e){this.overlays.add(e)}disconnected(e){this.overlays.delete(e)}present(e){e.willPresent&&!e.willPresent()||(this.dismissOthers(e),e.present())}dismiss(e){e.willDismiss&&!e.willDismiss()||e.dismiss()}dismissOthers(e){this.overlays.forEach(i=>{i!==e&&this.dismiss(i)})}},u=class extends p{},h=new u,P=':host{display:inline-block;position:fixed;left:0px;top:0px;z-index:var(--theme-z-index-tooltip);max-width:18.25rem;opacity:0;visibility:collapse !important;overflow-wrap:break-word;border-radius:0.25rem;background-color:var(--theme-tootlip--background);padding:0.375rem 0.75rem 0.375rem 0.875rem;box-shadow:var(--theme-shadow-4)}:host .tooltip-title{display:flex;align-items:center}:host .tooltip-title ::slotted(ix-icon){margin-right:0.35rem}:host(.visible){opacity:1;visibility:visible !important}:host(.visible) .arrow,:host(.visible) .arrow::before{position:absolute;width:12px;height:12px;background:inherit}:host(.visible) .arrow{visibility:hidden}:host(.visible) .arrow::before{visibility:visible;content:"";transform:rotate(45deg);background-color:var(--theme-tootlip--background)}',k=P,A=function(t,e,i,o){var r=arguments.length,s=r<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(d=t[c])&&(s=(r<3?d(s):r>3?d(e,i,s):d(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},l=t=>t!=null?`${t}px`:"",x=class{constructor(t){L(this,t),this.for=void 0,this.titleContent=void 0,this.interactive=!1,this.placement="top",this.showDelay=0,this.hideDelay=50,this.animationFrame=!1,this.visible=!1}get arrowElement(){return this.hostElement.shadowRoot.querySelector(".arrow")}destroyAutoUpdate(){this.disposeAutoUpdate!==void 0&&this.disposeAutoUpdate()}showTooltip(t){return n(this,null,function*(){clearTimeout(this.hideTooltipTimeout),yield this.applyTooltipPosition(t),this.showTooltipTimeout=setTimeout(()=>{h.present(this),this.applyTooltipPosition(t)},this.showDelay)})}hideTooltip(){return n(this,null,function*(){clearTimeout(this.showTooltipTimeout);let t=50;this.interactive&&this.hideDelay===t&&(t=150),this.hideTooltipTimeout=setTimeout(()=>{h.dismiss(this)},t),this.destroyAutoUpdate()})}computeArrowPosition({placement:t,middlewareData:e}){let{x:i,y:o}=e.arrow;if(t.startsWith("top"))return{left:l(i),top:l(o)};if(t.startsWith("right"))return{left:l(-6),top:l(o)};if(t.startsWith("bottom"))return{left:l(i),top:l(-6)};if(t.startsWith("left"))return{right:l(-6),top:l(o)}}computeTooltipPosition(t){return n(this,null,function*(){return T(t,this.hostElement,{strategy:"fixed",placement:this.placement,middleware:[y(),v(12),m({element:this.arrowElement}),b({fallbackStrategy:"initialPlacement",padding:10})]})})}applyTooltipArrowPosition(t){let e=this.computeArrowPosition(t);Object.assign(this.arrowElement.style,e)}applyTooltipPosition(t){return n(this,null,function*(){if(t)return new Promise(e=>{this.destroyAutoUpdate(),this.disposeAutoUpdate=w(t,this.hostElement,()=>n(this,null,function*(){setTimeout(()=>n(this,null,function*(){let i=yield this.computeTooltipPosition(t);i.middlewareData.arrow&&this.applyTooltipArrowPosition(i);let{x:o,y:r}=i;Object.assign(this.hostElement.style,{left:o!==null?`${o}px`:"",top:r!==null?`${r}px`:""}),e(i)}))}),{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,animationFrame:this.animationFrame})})})}clearHideTimeout(){this.interactive&&clearTimeout(this.hideTooltipTimeout)}queryAnchorElements(){return n(this,null,function*(){if(typeof this.for=="string")return Promise.resolve(Array.from(document.querySelectorAll(this.for)));if(this.for instanceof HTMLElement)return Promise.resolve([this.for]);if(this.for instanceof Promise)return[yield this.for]})}registerTriggerListener(){return n(this,null,function*(){let t=yield this.queryAnchorElements();this.disposeListener&&this.disposeListener(),t&&t.forEach(e=>{let i=()=>{this.showTooltip(e)},o=()=>{this.hideTooltip()},r=()=>{this.showTooltipTimeout!==void 0&&clearTimeout(this.showTooltipTimeout),i()},s=()=>{this.hideTooltip()};e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",o),e.addEventListener("focusin",r),e.addEventListener("focusout",s),this.disposeListener=()=>{e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",o),e.removeEventListener("focusin",r),e.removeEventListener("focusout",s)}})})}registerTooltipListener(){let{hostElement:t}=this;t.addEventListener("mouseenter",()=>this.clearHideTimeout()),t.addEventListener("focusin",()=>this.clearHideTimeout()),t.addEventListener("mouseleave",()=>this.hideTooltip()),t.addEventListener("focusout",()=>this.hideTooltip())}onKeydown(t){return n(this,null,function*(){t.code==="Escape"&&this.hideTooltip()})}componentWillLoad(){this.registerTriggerListener()}componentDidLoad(){this.observer=new MutationObserver(()=>{this.registerTriggerListener()}),this.observer.observe(document.body,{attributes:!0,attributeFilter:["data-ix-tooltip"],childList:!0,subtree:!0}),this.registerTooltipListener()}connectedCallback(){h.connected(this)}disconnectedCallback(){var t;(t=this.observer)===null||t===void 0||t.disconnect(),this.destroyAutoUpdate(),h.disconnected(this)}isPresent(){return this.visible}present(){this.visible=!0}dismiss(){this.visible=!1}render(){return a(g,{key:"5d57bd50e4b54e59eef7e0ec463cf9cadba6ddc4",class:{visible:this.visible},role:"tooltip"},a("div",{key:"004a422b325b2c26639e479f3bc6a832277c38db",class:"tooltip-title"},a("slot",{key:"dfb6ebe4022d3835b11d7237438358e8dd27191d",name:"title-icon"}),a("ix-typography",{key:"e4230c3e9c28f53d217e8653fd972749af995dde",variant:"default-title"},this.titleContent,a("slot",{key:"bfd75a3ae808f03a552271a9f10c896de28072e2",name:"title-content"}))),a("div",{key:"b8c20ae1bb16343dca997ecb2ef744d8b18b6ede",class:"tooltip-content"},a("slot",{key:"cb15413ddd0b35a6ceb5dd95beebc855131fb998"})),a("div",{key:"91e9df64725d3ce40f280640374f0e95f89cf67b",class:"arrow"}))}get hostElement(){return E(this)}};A([f("keydown",t=>t.visible)],x.prototype,"onKeydown",null);x.style=k;export{x as ix_tooltip};
